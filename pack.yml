id: Elyean
author: iomatix
version: 0.1.1

structures:
  locatable:
    minecraft:desert_pyramid: DESERT
    minecraft:stronghold: STRONGHOLD
    minecraft:pillager_outpost: OUTPOST
    minecraft:swamp_hut: SWAMP
    minecraft:monument: MONUMENT
    minecraft:igloo: IGLOO
    minecraft:jungle_pyramid: JUNGLE
    minecraft:ruined_portal: RUINED_PORTAL
    minecraft:village: VILLAGE
    minecraft:mineshaft: MINESHAFT

blend:
  terrain:
    step: 3
    elevation: 4

beta:
  carving: false

vanilla:
  mobs: true

noise:
  noise2:
    type: FBm
    dimensions: 2
    octaves: 4
    function:
      type: OpenSimplex2
      frequency: 0.0075
  noise3:
    type: FBm
    dimensions: 3
    octaves: 4
    function:
      type: OpenSimplex2
      frequency: 0.0075
  rand:
    dimensions: 3
    type: WhiteNoise
  desert:
    type: DomainWarp
    dimensions: 2
    amplitude: 25
    function:
      type: Cellular
      frequency: 0.015
      return: Distance
    warp:
      frquency: 0.015
      type: OpenSimplex2
  mesa:
    type: "DOMAINWARP"
    amplitude: 15
    warp:
      type: "OPENSIMPLEX2S"
      frequency: 0.02
    function:
      type: "CELLULAR"
      return: "Distance"
      frequency: 0.015
  mesaMask: # Essentially a white noise mask for the mesa function.
    type: LINEAR
    min: -4 # [0.2 ... 1]
    max: 1
    function:
      type: "DOMAINWARP"
      amplitude: 15
      warp:
        type: "OPENSIMPLEX2S"
        frequency: 0.02
      function:
        type: "CELLULAR"
        return: "CellValue"
        frequency: 0.015
  noiseC:
    dimensions: 2
    type: Cellular
    frequency: 0.25
    return: NoiseLookup
    lookup:
      type: FBm
      octaves: 4
      function:
        type: OpenSimplex2
        frequency: 0.02
  
  bubble: # Bubbly noise
    dimensions: 2
    type: LINEAR
    min: -0.75
    max: -1
    function:
      type: CLAMP
      min: -1
      max: -0.6
      function:
        type: Cellular
        frequency: 0.075
        return: Distance2Add

variables:
  base: 63
biomes:
  type: SINGLE
  biome: NEW_AVALONIA_PLAINS
  resolution: 4
  blend:
    amplitude: 1.75
    noise:
      type: OpenSimplex2
      frequency: 0.12
  image:
    name: map.png
    align: NONE
  pipeline:
    initial-size: 4
    source:
      type: NOISE
      biomes:
        OCEAN: 1
        BEACH: 2
      noise:
        type: FBm
        function:
          type: OpenSimplex2
          frequency: 0.04
    stages:
      - mutate: # Ocean climate distribution
          type: REPLACE
          from: "BIOME:OCEAN"
          to:
            - "COLD_OCEAN_DEEP": 6
            - "OCEAN_DEEP": 8
            - "WARM_OCEAN_DEEP": 12
          noise: &climate # This noise will be used elsewhere for climate.
            type: OpenSimplex2 # Use Simplex, so hot cannot be directly next to cold.
            salt: 2
            frequency: 0.025
      - mutate: # Land climate distribution
          type: REPLACE
          from: "BIOME:PLAINS"
          to:
            - TUNDRA: 4 # Super cold biomes
            - TAIGA: 2 # Taiga buffer zone
            - PLAINS: 8 # Temperate biomes
            - JUNGLE: 12 # Warm biomes
          noise: *climate # Use climate noise
      - mutate:
          type: REPLACE
          from: "BIOME:WARM_OCEAN_DEEP"
          to:
            - "WARM_OCEAN_DEEP": 1
            - "LUKEWARM_OCEAN_DEEP": 8
          noise:
            type: WhiteNoise
            salt: 21
      - mutate: # Randomize Cold/Frozen oceans.
          type: REPLACE
          from: "BIOME:COLD_OCEAN_DEEP"
          to:
            - "COLD_OCEAN_DEEP": 4
            - "FROZEN_OCEAN_DEEP": 1
          noise:
            type: WhiteNoise
            salt: 21